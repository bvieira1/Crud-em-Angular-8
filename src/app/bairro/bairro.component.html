<mat-card fxFlex>
    <mat-card-title>
        Bairros Form
    </mat-card-title>

    <mat-card-content>
        <form [formGroup]="bairroForm" (ngSubmit)="save()" fxLayout="column" fxLayoutAlign="space-between" #form="ngForm">
            <input type="hidden" formControlName="_id">

            <mat-form-field>
                <input matInput placeholder="Name bairro" formControlName="bairro">
            </mat-form-field>

            <mat-form-field>
                <input matInput placeholder="Title" formControlName="title">
            </mat-form-field>

            <mat-form-field>
                <input matInput placeholder="Subtitle" formControlName="subtitle">
            </mat-form-field>

            <mat-form-field>
                <input matInput placeholder="Description" formControlName="description">
            </mat-form-field>

            <input (change)="picked($event)" type="file" multiple/>
            <br />
            <hr />
            <img src="{{ imageSource }}" class="img" />

            <!-- <input type="file" accept="image/*" (change)="showPreview($event)" multiple/>

            <div class="imagePreview" *ngIf="imageURL && imageURL !== ''">
                <img [src]="imageURL" [alt]="bairroForm.value.name" class="img" formControlName="image">
            </div> -->

            <!-- <input (change)="picked($event)" type="file" formControlName="image" />
            <br/>
            <img src="{{ imageSource }}" class="img" /> -->

            <!-- Assign Image Alt -->
            <!-- <input formControlName="name" placeholder="Enter name"> -->

            <!-- <mat-form-field>
                <input matInput placeholder="Image" formControlName="image">
            </mat-form-field> -->

            <mat-form-field>
                <mat-select placeholder="Cidades " formControlName="cidades" multiple>
                    <mat-select-trigger>
                        {{bairroForm.value.cidades ? bairroForm.value.cidades[0]?.name : ''}}
                        <span *ngIf="bairroForm.value.cidades?.length> 1" class="additional-selection">
                        (+{{bairroForm.value.cidades.length - 1}} {{bairroForm.value.cidades.length === 2 ? 'other' : 'others'}})
              </span>
                    </mat-select-trigger>
                    <mat-option *ngFor="let cid of cidades" [value]="cid">{{cid.name}}</mat-option>
                </mat-select>
            </mat-form-field>

            <div fxLayout="row" fxLayoutAlign="end end">
                <button mat-button color="primary" fxFlex="10" type="submit">Save</button>
                <button mat-button color="warn" fxFlex="10" type="reset">Cancel</button>
            </div>
        </form>


        <ng-container *ngIf="bairros?.length>0; else empty">
            <mat-list>
                <h3 mat-subheader>Bairros</h3>
                <mat-list-item *ngFor="let prod of bairros">
                    <mat-icon mat-list-icon>folder</mat-icon>
                    <h4 mat-line>{{prod.bairro}}</h4>
                    <h4 mat-line>Title: {{prod.title}}</h4>
                    <h4 mat-line>Subtitle: {{prod.subtitle}}</h4>
                    <h4 mat-line>Description: {{prod.description}}</h4>
                    <img src="{{ prod.image }}" class="img" />
                    <mat-chip-list mat-line>
                        <mat-chip *ngFor="let d of prod.cidades">{{d.name}}</mat-chip>
                    </mat-chip-list>
                    <button mat-icon-button color="accent" (click)="delete(prod)">
          <mat-icon>delete</mat-icon>
        </button>
                    <button mat-icon-button color="primary" (click)="edit(prod)">
          <mat-icon>edit</mat-icon>
        </button>
                </mat-list-item>
            </mat-list>
        </ng-container>
        <ng-template #empty>
            <div><em>Empty</em></div>
        </ng-template>

    </mat-card-content>
</mat-card>
